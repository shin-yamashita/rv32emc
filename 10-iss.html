
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.7">
    
    
      
        <title>命令セットシミュレータ - rv32emc</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.9d5733d3.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="rv32emc" class="md-header__button md-logo" aria-label="rv32emc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            rv32emc
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              命令セットシミュレータ
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/shin-yamashita/rv32emc" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    shin-yamashita/rv32emc
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="rv32emc" class="md-nav__button md-logo" aria-label="rv32emc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    rv32emc
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/shin-yamashita/rv32emc" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    shin-yamashita/rv32emc
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        はじめに
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          命令セットシミュレータ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="10-iss.html" class="md-nav__link md-nav__link--active">
        命令セットシミュレータ
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#iss-rvsim" class="md-nav__link">
    開発した ISS (rvsim)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    usage
  </a>
  
    <nav class="md-nav" aria-label="usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trace-command" class="md-nav__link">
    trace command 実行例
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-command-ecc" class="md-nav__link">
    run command 実行例 (ecc)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    直接実行例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="20-rv_core.html" class="md-nav__link">
        rv_core module
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="25-xsim.html" class="md-nav__link">
        論理シミュレーション
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="30-fpga.html" class="md-nav__link">
        FPGA 実装
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="x_env.html" class="md-nav__link">
        開発環境
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="_1">命令セットシミュレータ<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<p>RTL 実装を行う前に、命令セットシミュレータ(ISS)を開発し、ハードウェアのリファレンスに用いた。<br />
CPU コア開発の流れは以下のようになる。  </p>
<ol>
<li>CPUのハード構成を設計し、パイプラインまで正確にエミュレートした ISS をＣ言語で作成<br />
   → ISS でテストプログラムを実行<br />
  risc-v のクロス gdb でのテストプログラム実行結果(実行トレース)をリファレンスとして ISS をデバッグ  </li>
<li>作成した ISS をリファレンスとして HDL(SystemVerilog) を記述、ISS の実行トレースと HDL の論理シミュレーション(xsim) 結果をつき合わせてHDLをデバッグ<br />
   ISS の実行トレースと突き合わせしやすい形のトレースを HDL の $display で出力しバグの追跡を行った <br />
   また、ISS 用に作成した命令のテーブルを使用して HDL の命令テーブルを自動生成するようにして記述ミスなどを防いだ  </li>
<li>テストプログラムで正しい実行結果が得られるようになったところで、割り込み機構を実装<br />
   uart でターミナルを接続、タイマー(mtime) でタイマー割り込みができるようにして、Vivado で論理合成を行いFPGAにロード、実機でターミナルをつないで動作確認  </li>
<li>モニタープログラムを組んで、テストプログラムをロード、実行できるようにして更に長時間の動作検証を行う  </li>
</ol>
<h2 id="iss-rvsim">開発した ISS (rvsim)<a class="headerlink" href="#iss-rvsim" title="Permanent link">&para;</a></h2>
<p><a href="https://github.com/shin-yamashita/rv32emc/tree/main/rvsim">source(github)</a></p>
<div class="highlight"><pre><span></span><code>rvsim
├── RV-insn.ods   : RV32 instruction table source 
│      ├─ RV-insn tab → RV-insn.csv  
│      └─ c-insn tab  → c-insn.csv  
├── insntab.py    : RV-insn.csv to optab.h / rv_dec_insn.sv converter
├── c-insntab.py  : c-insn.csv to c-optab.h / rv_exp_cinsn.sv converter
├── simcore.c     : ISS core  
├── syscall.h     : rv32 gcc system call deffs  
├── rvsim.c       : main() console command processor  
├── consio.c      : console interface 
└── monlib.c      : command processor utility  
(generated files) 
├── optab.h       : RV32 instruction table
├── c-optab.h     : Compressed instruction table
├── rv_dec_insn.sv  : decoder RTL
└── rv_exp_cinsn.sv : c-insn decoder RTL
</code></pre></div>
<p>simcore.c が rv_core のエミュレータ本体である。<br />
レジスタ(flip flop)の入力 d と、出力 q を持つ構造体 <code>reg32</code> などを定義し、論理演算結果を d にセットし、 <code>clock()</code> 関数で全レジスタの d→q を一斉に行うことで、回路動作をエミュレートした。<br />
<code>typedef struct _reg32 { u32 d; u32 q; } reg32;</code>  </p>
<p>rvsim.c が ISS のコマンドラインインターフェースである。<br />
GNU binutil の libbfd.so を用いて elf ファイルのハンドリングを行っている。  </p>
<p><a href="x_env.html#rvsim-iss">rvsim の compile install 手順</a>  </p>
<h2 id="usage">usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>$ rvsim {rv32 executable (elf)}    # elf ファイルを読み込む。または起動後 load コマンドで読み込む。
======= rvsim ==============================================
   rv32 processor simulator.
 load ELF file &#39;xxx&#39; : RISCV RVC RVE   # elf file から arch を判別
 number_of_symbols = 155
 vaddr:0 memsize:10000 _end:333c start:0
rvsim-E&gt;                               # prompt : rv32e は &#39;rvsim-E&gt;&#39; その他は &#39;rvsim-I&gt;&#39; 
  load       &lt;file (rv32 executable)&gt;
  dump       &lt;-stk&gt; &lt;addr|label&gt;       # メモリダンプ　(PgUp/PgDn/Up/Down キーでアドレス移動、&#39;q&#39; で終了)
  reg                                  # register file dump
  run        &lt;N cyc|-all&gt;              # N cycle(or 無制限) 実行 &#39;q&#39; キーで中断
  cont       &lt;N cyc|-all&gt;              # 継続実行
  trace      &lt;N cyc|-all&gt; &lt;-r&gt; &lt;| tee (fn)&gt;  # 実行トレース （| tee でファイルにダンプ)
  break      &lt;addr|label&gt; &lt;-d|-e (n)&gt;  # break point 設定/表示 (-d/-e で disable/enable)
  info                                 # 読み込んだ elf のメモリマップなど表示
  header                               # elf header 表示
  symbol                               # symbol list (address : symbol name) 表示
  dis        &lt;addr|lable&gt;              # addr/label 以降の disassemble list 表示 {space:next-page q:quit}
  debug      &lt;-r (fn)&gt; &lt;-m (fn)&gt; &lt;-c&gt;  # Register / Memory write log を指定のファイルに出力
  help       &lt;cmd&gt;
  quit       
  exit       

rvsim-E&gt; 
</code></pre></div>
<h3 id="trace-command">trace command 実行例<a class="headerlink" href="#trace-command" title="Permanent link">&para;</a></h3>
<p><span class="keys"><kbd class="key-enter">Enter</kbd></span> : 1 cycle 実行<br />
<span class="keys"><kbd class="key-space">Space</kbd></span> : 1 page 実行<br />
   10進数値 : 指定サイクル実行<br />
<span class="keys"><kbd class="key-q">Q</kbd></span> : quit  </p>
<div class="highlight"><pre><span></span><code>rvsim-E&gt; trace
 ra(      2a)  sp(    8000)  gp(    33f8)  tp(       0)  t0(      50)  t1(       0)  t2(       0)  s0(       0)  s1(       0)  a0(    2c14)  a1(     728) 
 a2(       0)  a3(       0)  a4(     728)  a5(    2c14) 
   cnt     pc       ir opc      opr                  mar      mdr      mdw     rrd1     rrd2  alu rwa rwd    rwdat     ra(1)    sp(2)    gp(3)   a0(10)   a1(11)   a2(12)   a3(13)    s0(8)    s1(9)
     0      0 ffffffff auipc    gp,12288               0        0       --        0        0   --  --  xx        0         0  3ffffd0        0        0        0        0        0        0        0  
     1      0 00003197 auipc    gp,12288               0        0       --        0        0   --  --  xx        0         0  3ffffd0        0        0        0        0        0        0        0  
     2      4 3f818193 addi     gp,gp,1016             0        0       --        0     3000  ADD  gp ALU        0         0  3ffffd0        0        0        0        0        0        0        0  
     3      8 00008117 auipc    sp,32768               0        0       --     3000      3f8  ADD  gp ALU     3000         0  3ffffd0        0        0        0        0        0        0        0  
     4      c ff810113 addi     sp,sp,-8               0        0       --        8     8000  ADD  sp ALU     33f8         0  3ffffd0        0        0        0        0        0        0        0  
     5     10 00000297 auipc    t0,0                   0        0       --     8008 fffffff8  ADD  sp ALU     8008         0  3ffffd0     3000        0        0        0        0        0        0  
     6     14 04028293 addi     t0,t0,64               0        0       --       10        0  ADD  t0 ALU     8000         0  3ffffd0     33f8        0        0        0        0        0        0  
     7     18 30529073 csrrw    x0,t0,mtvec            0        0       --       10       40  ADD  t0 ALU       10         0     8008     33f8        0        0        0        0        0        0  
     8     1c 81c18513 addi     a0,gp,-2020            0        0       --       50        0  FLD  x0 ALU       50         0     8000     33f8        0        0        0        0        0        0  
     9     20 f4418593 addi     a1,gp,-188             0        0       --     33f8 fffff81c  ADD  a0 ALU        0         0     8000     33f8        0        0        0        0        0        0  
    10     24     8d89 c.sub    a1,a1,a0               0        0       --     33f8 ffffff44  ADD  a1 ALU     2c14         0     8000     33f8        0        0        0        0        0        0  
    11     26 607010ef jal      ra,(1e2c)              0        0       --     333c     2c14  SUB  a1 ALU     333c         0     8000     33f8        0        0        0        0        0        0  
    12     2a     4502 -b-      --                     0        0       --        0       2a   S2  ra ALU      728         0     8000     33f8     2c14        0        0        0        0        0  
    13   1e2c 00357793 andi     a5,a0,3                0        0       --        0       2a   S2  --  xx       2a         0     8000     33f8     2c14     333c        0        0        0        0  
    14   1e30     c7b9 c.beqz   a5,x0,(1e7e)           0        0       --     2c14        3  AND  a5 ALU        0         0     8000     33f8     2c14      728        0        0        0        0  
    15   1e32 fff58713 -b-      --                     0        0       --        0        0   xx  x0  --        0        2a     8000     33f8     2c14      728        0        0        0        0  
    16   1e7e     87aa c.mv     a5,x0,a0               0        0       --        0        0   xx  --  xx        0        2a     8000     33f8     2c14      728        0        0        0        0  
    17   1e80     872e c.mv     a4,x0,a1               0        0       --        0     2c14  ADD  a5 ALU        0        2a     8000     33f8     2c14      728        0        0        0        0  
    18   1e82     b7f9 c.j      x0,(1e50)              0        0       --        0      728  ADD  a4 ALU     2c14        2a     8000     33f8     2c14      728        0        0        0        0  
    19   1e84     577d -b-      --                     0        0       --        0     1e84   S2  x0 ALU      728        2a     8000     33f8     2c14      728        0        0        0        0  
    20   1e50     460d c.li     a2,x0,3                0        0       --        0     1e84   S2  --  xx     1e84        2a     8000     33f8     2c14      728        0        0        0        0  
    21   1e52     86be c.mv     a3,x0,a5               0        0       --        0        3  ADD  a2 ALU        0        2a     8000     33f8     2c14      728        0        0        0        0  
   cnt     pc       ir opc      opr                  mar      mdr      mdw     rrd1     rrd2  alu rwa rwd    rwdat     ra(1)    sp(2)    gp(3)   a0(10)   a1(11)   a2(12)   a3(13)    s0(8)    s1(9)
rvsim-E&gt;   (&#39;q&#39; キーでプロンプトに戻る)
</code></pre></div>
<h3 id="run-command-ecc">run command 実行例 (ecc)<a class="headerlink" href="#run-command-ecc" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>rvsim-E&gt; r -all
reset_pc()
*** GF(2^8) Reed Solomon Coding. 12 parity, 6 error correction.
   :
**** No error.
** exit() timer: 0
exit(): 19

Total clock cycles: 1021788   stall - bra: 108623 [10.6%]  data: 72042 [ 7.1%]  exec: 1768 [ 0.2%]
rvsim-E&gt; 
</code></pre></div>
<h3 id="_2">直接実行例<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>$ rvsim -r ecc
reset_pc()
*** GF(2^8) Reed Solomon Coding. 12 parity, 6 error correction.
   :
**** No error.
** exit() timer: 0
exit(): 19

Total clock cycles: 1021788   stall - bra: 108623 [10.6%]  data: 72042 [ 7.1%]  exec: 1768 [ 0.2%]
</code></pre></div>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="index.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: はじめに" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              はじめに
            </div>
          </div>
        </a>
      
      
        
        <a href="20-rv_core.html" class="md-footer__link md-footer__link--next" aria-label="Next: rv_core module" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              rv_core module
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": ".", "features": ["toc.integrate", "navigation.top"], "search": "assets/javascripts/workers/search.5e67fbfe.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.e87a5f81.min.js"></script>
      
        <script src="javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>